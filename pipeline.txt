ì•„ë˜ ì˜ˆì‹œëŠ” CLI ëª…ë ¹ì–´ë¥¼ ì „ë¶€ Pythonâ€¯API í˜¸ì¶œë¡œ ì¹˜í™˜í•œ â€œëíŒì™•â€ ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.
í•œ íŒŒì¼(train_pipeline.py)ë¡œ í•©ì³ë„ ë˜ê³ , ë‹¨ê³„ë³„ë¡œ ë‚˜ëˆ ë„ ë¬´ë°©í•©ë‹ˆë‹¤.

0. í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜ (í•œÂ ë²ˆë§Œ)
python
ë³µì‚¬
# ì²« ì‹¤í–‰ ë˜ëŠ” ê°€ìƒí™˜ê²½ ì¬êµ¬ì„± ì‹œ
import subprocess, sys
subprocess.run([sys.executable, "-m", "pip", "install", "-U",
                "ultralytics",   # YOLOÂ v11Â core
                "sahi",          # SlicedÂ Inference
                "wandb"])        # ì„ íƒÂ·ëª¨ë‹ˆí„°ë§
UltralyticsÂ íŒ¨í‚¤ì§€ëŠ” YOLO í´ë˜ìŠ¤ì™€ convert_coco, export ë“±ì„ ëª¨ë‘ í¬í•¨í•©ë‹ˆë‹¤. 
Ultralytics Docs

1. (ì„ íƒ)Â AGARÂ ë°ì´í„°ì…‹Â COCOâ€¯â†’â€¯YOLO ë³€í™˜
python
ë³µì‚¬
from ultralytics.data.converter import convert_coco

# COCOÂ jsonì´ ë“¤ì–´ ìˆëŠ” í´ë” ê²½ë¡œ
convert_coco(labels_dir="agar/annotations",
             save_dir="agar/yolo_labels",
             use_segments=False)     # detectionìš©ì´ë¯€ë¡œ ì„¸ê·¸ë¨¼íŠ¸ ë¶ˆí•„ìš”
Ultralytics Docs

2. ë°ì´í„°Â YAML ì •ì˜
python
ë³µì‚¬
from pathlib import Path
import yaml, textwrap

dataset_root = Path("dataset")             # images/, labels/ 2â€‘ê³„ì¸µ í´ë”
yaml_dict = dict(
    path=str(dataset_root),
    train="images/train",
    val="images/val",
    test="images/test",
    nc=1,
    names=["colony"]
)
(Path("colony.yaml")).write_text(textwrap.dedent(yaml.dump(yaml_dict)))
3â€‘A. ì‚¬ì „í•™ìŠµ(AGAR)
python
ë³µì‚¬
from ultralytics import YOLO

model = YOLO("yolo11s.pt")   # COCOâ€¯preâ€‘trained ê°€ì¤‘ì¹˜
results = model.train(
    task="detect",
    data="agar.yaml",
    epochs=120,
    imgsz=640,
    batch=32,
    lr0=0.01,
    warmup_epochs=3,
    optimizer="AdamW",
    cos_lr=True,
    project="colony_exp",
    name="agar_pretrain",
    exist_ok=False,
    tracker="wandb"
)
best_ag_weights = results.best  # best.pt ê²½ë¡œ
CLIÂ yolo ... ëª…ë ¹ì— ëŒ€ì‘í•˜ëŠ” ì™„ì „ ë™ë“± í˜¸ì¶œì…ë‹ˆë‹¤. 
Ultralytics Docs

3â€‘B. ì‚¬ë‚´Â ë°ì´í„°Â íŒŒì¸íŠœë‹
python
ë³µì‚¬
finetune = YOLO(best_ag_weights)
results_ft = finetune.train(
    task="detect",
    data="colony.yaml",
    epochs=60,
    imgsz=640,
    batch=24,
    lr0=0.002,
    freeze=10,         # ë°±ë³¸ ì¼ë¶€ ë™ê²°
    project="colony_exp",
    name="finetune_run",
    exist_ok=False
)
4. ê²€ì¦Â ë°Â í†µê³„Â ì¶œë ¥
python
ë³µì‚¬
stats = finetune.val(
    data="colony.yaml",
    plots=True,            # PR,Â F1Â ê³¡ì„  ì €ì¥
    save_json=True         # COCOâ€‘style ê²°ê³¼ json
)
print(stats.results_dict)  # mAP50,Â mAP50â€‘95 ë“±
5. ë‹¨ì¼/ë°°ì¹˜Â ì¶”ë¡ 
python
ë³µì‚¬
pred = finetune.predict(
    source="samples/plate.jpg",   # str ë˜ëŠ” PathÂ /Â í´ë” / glob / url / webcam
    conf=0.25,
    iou=0.5,
    save=True,                    # ê²°ê³¼ ì´ë¯¸ì§€ ì €ì¥
)
6. SAHIÂ ìŠ¬ë¼ì´ìŠ¤ ì¶”ë¡  (ì´ˆê³ í•´ìƒë„Â·ì†Œí˜•Â ê°ì²´ìš©)
python
ë³µì‚¬
from sahi.models.yolov8 import Yolov8DetectionModel   # v11ë„ ë™ì¼ ì¸í„°í˜ì´ìŠ¤
from sahi.predict import get_sliced_prediction

detection_model = Yolov8DetectionModel(
    model_path=finetune.ckpt_path,   # ë˜ëŠ” 'best.pt'
    confidence_threshold=0.25,
    device="cuda:0"                  # CPUÂ ì‚¬ìš© ì‹œ 'cpu'
)
result = get_sliced_prediction(
    image="samples/large_plate.jpg",
    detection_model=detection_model,
    slice_height=640,
    slice_width=640,
    overlap_height_ratio=0.2,
    overlap_width_ratio=0.2
)
result.export_visuals(export_dir="sahi_vis/")
Ultralytics Docs

7. TensorRTÂ ì—”ì§„Â ë‚´ë³´ë‚´ê¸° (JetsonÂ OrinÂ ë“±)
python
ë³µì‚¬
engine_path = finetune.export(
    format="engine",           # ONNXÂ â†’Â TensorRT
    device=0                   # GPUÂ index
)
print(f"TensorRTÂ engine saved to {engine_path}")
Ultralytics Docs
Ultralytics Docs

8. ì¶”ê°€Â ìœ í‹¸ë¦¬í‹°Â ëª¨ìŒ
python
ë³µì‚¬
# (1)Â ë°ì´í„°ì…‹ í†µê³„ë§Œ ë¹ ë¥´ê²Œ ë³´ê³  ì‹¶ì„ ë•Œ
from ultralytics.data.utils import yaml_check
yaml_check("colony.yaml")    # í´ë˜ìŠ¤Â·ë¼ë²¨ í†µê³„ í‘œ ì¶œë ¥

# (2)Â ë²¤ì¹˜ë§ˆí¬ FPS
fps = finetune.benchmark(source="samples/webcam.mp4", imgsz=640, device=0)
print(f"Avgâ€¯FPS: {fps:.2f}")

# (3)Â ì‹œë“œ ê³ ì • (ì¬í˜„ì„±)
import torch, random, numpy as np
seed = 42
torch.manual_seed(seed);  random.seed(seed);  np.random.seed(seed)
ì´ë ‡ê²Œ ì“°ì„¸ìš”
**train_pipeline.py**ë¡œ ì €ì¥ í›„ python train_pipeline.py ì‹¤í–‰.

dataset/Â·agar/Â ê²½ë¡œë§Œ ì‹¤ì œ í´ë” ìœ„ì¹˜ì— ë§ê²Œ ìˆ˜ì •.

WANDBë‚˜ TensorBoardë¡œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ë©´ CLIÂ ì‚¬ìš© ë•Œì™€ ë™ì¼í•œ ê·¸ë˜í”„ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìœ„ ìŠ¤í¬ë¦½íŠ¸ëŠ” ëª¨ë“  CLI ëª…ë ¹ì„ 100â€¯%Â ë™ì¼í•œ ê¸°ëŠ¥ì˜ PythonÂ í•¨ìˆ˜ í˜¸ì¶œë¡œ ì¹˜í™˜í•œ ê²ƒìœ¼ë¡œ,
ì¶”ê°€ ì…¸ ëª…ë ¹ì–´ ì—†ì´ Jupyter/IDEÂ í™˜ê²½ì—ì„œë„ ì‰½ê²Œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ‘